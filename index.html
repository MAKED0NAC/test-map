<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>Mini Navigacija</title>

<link rel="stylesheet"
href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
}

#map {
  width:100vw;
  height:100vh;
}

/* uklanja zoom tipke */
.leaflet-control-zoom {
  display:none;
}
</style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map', {
  zoomControl:false,
  attributionControl:false
}).setView([0,0], 16);

// Dark tiles
L.tileLayer(
  'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png'
).addTo(map);

// Custom marker
const myIcon = L.icon({
  iconUrl: "marker.png", // zamijeni svojom slikom
  iconSize: [40,40],
  iconAnchor: [20,20]
});

let marker;

// GPS tracking
navigator.geolocation.watchPosition(pos => {
  const lat = pos.coords.latitude;
  const lng = pos.coords.longitude;

  map.setView([lat,lng], 16, {animate:true});

  if(!marker){
    marker = L.marker([lat,lng], {icon:myIcon}).addTo(map);
  } else {
    marker.setLatLng([lat,lng]);
  }

}, () => alert("Uključi GPS"), {
  enableHighAccuracy:true,
  maximumAge:1000,
  timeout:10000
});

// pokušaj fullscreen nakon prvog dodira
document.body.addEventListener("click", () => {
  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen();
  }
}, {once:true});
</script>

</body>
</html>
